<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Thống Kê</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
    <style>
        .stats-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .stat-card { background-color: #e9ecef; padding: 20px; border-radius: 8px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .stat-card h3 { margin-top: 0; color: #004d4d; border-bottom: 1px solid #ccc; padding-bottom: 10px; margin-bottom: 15px;}
        .stat-card .value { font-size: 1.8em; font-weight: bold; color: #333; }
        .stat-card .label { font-size: 0.9em; color: #555; margin-top: 5px; }
    </style>
</head>
<body>
    <div th:replace="~{fragments/_header :: header}"></div>

    <div class="container">
        <h1>Thống Kê Hoạt Động</h1>

        <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

        <div th:if="${thongKe}">
            <div class="stats-container">
                <div class="stat-card">
                    <h3>Số Loại Sản Phẩm</h3>
                    <div class="value" th:text="${thongKe.soLuongSanPhamTrongKho}">0</div>
                    <div class="label">Hiện có trong kho</div>
                </div>
                <div class="stat-card">
                    <h3>Tổng Lượng Tồn Kho</h3>
                    <div class="value" th:text="${#numbers.formatInteger(thongKe.tongSoLuongNhap, 1, 'COMMA')}">0</div>
                    <div class="label">Tổng số lượng các SP</div>
                </div>
                 <div class="stat-card">
                    <h3>Giá Trị Tồn Kho (Giá Nhập)</h3>
                    <div class="value" th:text="${#numbers.formatDecimal(thongKe.tongTienNhap, 1, 'COMMA', 2, 'POINT')}">0.00</div>
                     <div class="label">Ước tính</div>
                </div>

                <div class="stat-card">
                    <h3>Số Hóa Đơn</h3>
                    <div class="value" th:text="${thongKe.soLuongHoaDon}">0</div>
                    <div class="label">Đã được tạo</div>
                </div>
                <div class="stat-card">
                    <h3>Tổng Lượng Đã Bán</h3>
                    <div class="value" th:text="${#numbers.formatInteger(thongKe.tongSoLuongBan, 1, 'COMMA')}">0</div>
                    <div class="label">Tổng số lượng các SP</div>
                </div>
                 <div class="stat-card">
                    <h3>Tổng Doanh Thu</h3>
                    <div class="value" th:text="${#numbers.formatDecimal(thongKe.tongTienBan, 1, 'COMMA', 2, 'POINT')}">0.00</div>
                    <div class="label">Tổng tiền bán ra</div>
                </div>
                 </div>
        </div>
        <div th:unless="${thongKe}">
             <p class="alert alert-info">Không có dữ liệu thống kê.</p>
        </div>

         <p style="margin-top: 30px;">
             <a th:href="@{/banhang}" class="button-link">Quay lại trang Bán Hàng</a>
         </p>

    </div> </body>
</html>